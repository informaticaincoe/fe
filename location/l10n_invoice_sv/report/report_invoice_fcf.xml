<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <template id="report_invoice_fcf">
        <t t-name="l10n_invoice_sv.report_invoice_fcf">
	<t t-call="web.html_container">
		<t t-set="o" t-value="o.with_context({'lang':o.partner_id.lang})"/>
		<!-- zip qr -->
		<div class="page" style="display:flex, flex-direction:column; justify-content: space-between; align-items: end; height:100vh;" t-att-data-oe-model="o and o._name" t-att-data-oe-id="o and o.id">
			<style>
			    .section-title {
			        font-size: 11px;
			        font-weight: bold;
			        text-transform: uppercase;
			    }

    	        p {
    	            margin: 2px 0;
                    line-height: 1.5;
    	        }

    	        span {
    	            font-weight: normal;
    	        }

    	        @page {
                    margin: 15px 5px;
                 }

                .page {
                  display: flex;
                  flex-direction: column;
                  height: 100vh;
                }

                body {
                    font-family: 'Inter', sans-serif;
                    margin-top: 5mm;
                    margin-bottom: 5mm;
                    margin-left: 10mm;
                    margin-right: 10mm;
                    padding-top: 10px !important;
                    padding-bottom: 10px !important;
                    font-size: 12px;
                }

                @font-face {
                  font-family: 'Inter';
                  src: url('/l10n_invoice_sv/static/src/fonts/Inter-Regular.ttf') format('truetype');
                }

                div {
                    padding: 0;
                }

                #detalles {
                  flex: 1 1 auto;
                }

                .resumen, .footer {
                  flex: 0 0 auto;
                }

                .page .article {
                  display: flex;
                  flex-direction: column;
                  height: 100%;
                }

                html, body { height: 100%; margin: 0; }

               .resumen {
                  flex: 0 0 auto;
                  margin-top: auto;
                }

                .footer {
                  flex: 0 0 auto;
                }

                .invoice_tbody td {
                  margin: 5px;
                  text-align: left !important;
                  vertical-align: top;      /* si quieres que el texto empiece desde arriba */
                }

                .invoice_tbody td span {
                  margin: 5px;     /* si quieres que el texto empiece desde arriba */
                }
		    </style>
			<!-- Header factura -->
			<t t-set="company" t-value="o.company_id"/>
			<t t-set="partner" t-value="o.partner_id"/>

			<div class="row align-items-center mb-4">
				<div class="col">
					<img t-att-src="'data:image/png;base64,%s' % company.logo_web.decode('utf-8')" style="max-height:55px; max-width:120px;"/>
				</div>
				<div class="col-7 text-center" style="row-gap: 0;">
					<p>
						<span t-field="company.name" class="text-uppercase fs-6 "/>
					</p>
					<p>
						<span t-field="company.partner_id.contact_address_complete" class="fw-normal"/>
					</p>
					<p>Número de control:

						<span t-field="o.name" class="fw-normal"/>
					</p>
					<p>Codigo de generación:

						<span t-field="o.hacienda_codigoGeneracion_identificacion" class="fw-normal"/>
					</p>
					<p>sello:

						<span t-field="o.hacienda_selloRecibido" class="fw-normal"/>
					</p>
					<p>Tipo modelo:

						<span t-field="o.journal_id.sit_modelo_facturacion" class="fw-normal"/>
					</p>
					<p>Tipo transmisión:

						<span t-field="o.journal_id.sit_tipo_transmision" class="fw-normal"/>
					</p>
				</div>
				<div class="col text-center border rounded-2 border-light-subtle">
					<p style="font-size: 11px;" t-field="o.journal_id"/>
					<img t-att-src="'data:image/png;base64,%s' % o.sit_qr_hacienda.decode('utf-8')" style="width:50%; height:auto;"/>
					<p style="font-size: 11px;">Generado:

						<span t-field="o.fecha_facturacion_hacienda" class="fw-normal"/>
					</p>
				</div>
			</div>
			<!--  Seccion receptor -->
			<div class="mb-4 w-100">
				<h1 class="section-title text-center mb-1 justify-content-center">Receptor</h1>
				<div class="row rounded-2 border border-light-subtle px-2 py-2">
					<div class="d-grid col-md-auto">
						<p>Nombre o razón social:</p>
						<p>Documento identificación:</p>
						<p>Correo electronico:</p>
						<p>Telefono:</p>
						<p>Dirección:</p>
					</div>
					<div class="d-grid col">
						<p>
							<span t-field="partner.complete_name" class="fw-normal"/>
						</p>
						<p>
							<span t-field="partner.dui" class="fw-normal"/> (DUI)

						</p>
						<p>
							<span t-field="partner.email" class="fw-normal"/>
						</p>
						<p>
							<span t-field="partner.phone" class="fw-normal"/>
						</p>
						<p>
							<span t-field="partner.contact_address_complete" class="fw-normal"/>
						</p>
					</div>
				</div>
			</div>
			<!--  Seccion venta a cuenta de terceros -->
			<div class="mb-4 w-100">
				<h1 class="section-title text-center mb-1">Venta a cuenta de terceros</h1>
				<div class="row border border-light-subtle rounded-2 align-items-center">
					<p class="col border-end border-light-subtle">Tipo de documento:
						<span/>
					</p>
					<p class="col py-1">Nombre, denomicación o razón social:
						<span/>
					</p>
					<p class="col">
						<span/>
					</p>
				</div>
			</div>
			<!--  Seccion documentos relacionados -->
			<div class="mb-4 w-100">
				<h1 class="section-title text-center mb-1">Documentos relacionados</h1>
				<div class="row border border-light-subtle rounded-2 align-items-center">
					<p class="col border-end border-light-subtle">Tipo de documento:

						<span/>
					</p>
					<p class="col py-1">N° documento:

						<span/>
					</p>
					<p class="col py-1">fecha del documento

						<span/>
					</p>
				</div>
			</div>
			<!-- Seccion detalles compra -->
			<br/>
			<div class="row" id="detalles">
				<table id="detalle" class="border border-light-subtle rounded-2">
					<thead>
						<tr>
							<th class="text-center border border-light-subtle" style="width: auto;">N°</th>
							<th class="text-center border border-light-subtle" style="width: auto;">Cantidad</th>
							<th class="text-center border border-light-subtle" style="width: auto;">Codigo</th>
							<th class="text-center border border-light-subtle" style="width: auto;">Descripcion</th>
							<th class="text-center border border-light-subtle" style="width: auto;">Precio Unitario</th>
							<th class="text-center border border-light-subtle" style="width: auto;">Otros montos no afectos</th>
							<th class="text-center border border-light-subtle" style="width: auto;">Descuento por item</th>
							<th class="text-center border border-light-subtle" style="width: auto;">Ventas sujetas</th>
							<th class="text-center border border-light-subtle" style="width: auto;">Ventas exentas</th>
							<th class="text-center border border-light-subtle" style="width: auto;">Ventas grabadas</th>
						</tr>
					</thead>
					<tbody class="invoice_tbody">
						<tr t-foreach="o.invoice_line_ids" t-as="l">
							<td class="border-end border-light-subtle text-start"/>
							<td class="border-end border-light-subtle text-start">
								<span t-field="l.quantity"/>
								<span t-field="l.uom_id" groups="product.group_uom"/>
							</td>
							<td class="border-end border-light-subtle text-start">
								<span t-esc="l.price_unit * 1.13" t-options="{'widget': 'monetary', 'display_currency': o.currency_id}"/>
							</td>
							<td class="border-end border-light-subtle text-start">
								<span t-field="l.name"/>
							</td>
							<td class="border-end border-light-subtle text-start">
								<span t-esc="l.price_unit * 1.13"/>
							</td>
							<td class="border-end border-light-subtle text-start">
								<span t-esc="l.price_subtotal * 1.13" t-options="{'widget': 'monetary', 'display_currency': o.currency_id}"/>
							</td>
							<td class="border-end border-light-subtle text-start">
								<span t-field="l.discount"/>
							</td>
							<td class="border-end border-light-subtle text-start">
								<span>$ 0.00</span>
							</td>
							<td class="border-end border-light-subtle text-start">
								<span>$ 0.00</span>
							</td>
							<td class="border-end border-light-subtle text-start">
								<span>$ 0.00</span>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
			<!-- RESUMENTES-->
			<section class="mt-3 w-100 p-0">
				<div class="d-grid gap-2 align-items-center" style="grid-template-columns: repeat(2, 1fr); align-items:center;">
					<div class="d-grid h-100 gap-2">
						<div class="px-2 border border-light-subtle rounded-2" style="display: flex; align-items:center;">
							<p class="fw-bold mb-1">Son:

								<span t-field="o.amount_text"/>
							</p>
						</div>
						<div class="px-2 border border-light-subtle rounded-2" style="display: flex; align-items:center;">
							<p class="fw-bold mb-1">Condición de operación:


								<span t-field="o.condiciones_pago"/>
							</p>
						</div>
						<div class="px-2 border border-light-subtle rounded-2" style=" display: flex; align-items:center;">
							<p class="fw-bold mb-1">Observaciones:

								<span/>
							</p>
						</div>
						<div class="px-2 border border-light-subtle rounded-2 d-flex" style="height: 160px; display: flex; align-items: stretch;">
							<!-- tu sub‐grid de responsables -->
							<div class="d-grid" style="grid-template-columns:1fr 1fr; grid-template-rows:1fr 1fr 1fr 1fr; width:100%; align-items: stretch;">
								<p class="fw-bold mb-3">Responsable emisor:</p>
								<p class="fw-bold">N° de documento:</p>
								<p/>
								<p/>
								<p class="fw-bold mb-3">Responsable receptor:</p>
								<p class="fw-bold">N° de documento:</p>
								<p/>
								<p/>
							</div>
						</div>
					</div>
					<!--
                        grid-template-columns: 1fr 1fr;
                        -->
					<div class="w-100">
						<table class="w-100">
							<tbody>
								<tr>
									<td class="px-1 border border-light-subtle text-end">Sumatoria de venta:</td>
									<td class="px-1 border border-light-subtle text-left">
										<span t-field="o.amount_total"/>
									</td>
								</tr>
								<tr>
									<td class="px-1 border border-light-subtle text-end">Monto global Desc. Rebajas y otros a ventas no sujetas:</td>
									<td class="px-1 border border-light-subtle text-left">
									    	<span>$ 0.00</span>
									</td>
								</tr>
								<tr>
									<td class="px-1 border border-light-subtle text-end">Otros montos, global Desc. Rebajas y otros a ventas exentas:</td>
									<td class="px-1 border border-light-subtle text-left">
											<span>$ 0.00</span>
									</td>
								</tr>
								<tr>
									<td class="px-1 border border-light-subtle text-end">Monto global Desc. Rebajas y otros a ventas grabadas:</td>
									<td class="px-1 border border-light-subtle text-start">
											<span>$ 0.00</span>
									</td>
								</tr>
								<tr>
									<td class="px-1 border border-light-subtle text-end">Sub-total:</td>
									<td class="px-1 border border-light-subtle text-start">
											<span>$ 0.00</span>
									</td>
								</tr>
								<tr>
									<td class="px-1 border border-light-subtle text-end">Total IVA:</td>
									<td class="px-1 border border-light-subtle text-start">
											<span>$ 0.00</span>
									</td>
								</tr>
								<tr>
									<td class="px-1 border border-light-subtle text-end">IVA retenido:</td>
									<td class="px-1 border border-light-subtle text-start">
										<span>$ 0.00</span>
									</td>
								</tr>
								<tr>
									<td class="px-1 border border-light-subtle text-end">Retención de renta:</td>
									<td class="px-1 border border-light-subtle text-start">
									<span>$ 0.00</span>
									</td>
								</tr>
								<tr>
									<td class="px-1 border border-light-subtle text-end">Monto total operación:</td>
									<td class="px-1 border border-light-subtle text-start">
										<span>$ 0.00</span>
									</td>
								</tr>
								<tr>
									<td class="px-1 border border-light-subtle text-end">Total otros Montos No afectados:</td>
									<td class="px-1 border border-light-subtle text-start">
										<span>$ 0.00</span>
									</td>
								</tr>
								<tr>
									<td class="px-1 border border-light-subtle text-end">Total a pagar:</td>
									<td class="px-1 border border-light-subtle text-start px-5">
									    <span class="text-start" t-field="o.amount_total"/>
									</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</section>
			<!-- footer -->
			<div class="footer d-flex w-100 justify-content-between p-0 mt-1">
				<p>Version:</p>
				<!-- <span t-field="o.sit_json_respuesta"/> -->
				<div class="d-flex justify-content-end align-items-center gap-3">
					<p class="">Contactanos</p>
					<div class="d-flex">
						<img t-att-src="'/l10n_invoice_sv/static/src/img/email.svg'" style="width:16px; height:auto; margin-right:7px;"/>
						<span t-field="company.email"/>
					</div>
					<div class="d-flex">
						<img t-att-src="'/l10n_invoice_sv/static/src/img/telephone.svg'" style="width:18px; height:auto; margin-right:7px;"/>
						<span t-field="company.phone"/>
					</div>
				</div>
			</div>

		<div class="footer"/>
		</div>
	</t>
</t>
        </template>
    </data>
</odoo>