<odoo>
    <!-- Vista lista agrupada por vehículo -->
    <record id="vehicle_dispatch_route_list" model="ir.ui.view">
        <field name="name">vehicle.dispatch.route.list</field>
        <field name="model">dispatch.route</field>
        <field name="arch" type="xml">
            <list create="0" edit="0" delete="0" open_form_view="0">
                <field name="code_route" string="Código de ruta" readonly="True"/>
                <field name="route_driver_id"/>
                <field name="departure_datetime"/>
                <field name="arrival_datetime"/>
                <field name="state"/>
            </list>
        </field>
    </record>

    <!-- Vista form personalizada -->
    <record id="vehicle_dispatch_route_form" model="ir.ui.view">
        <field name="name">vehicle.dispatch.route.form</field>
        <field name="model">dispatch.route</field>
        <field name="arch" type="xml">
            <form readonly="True">
                <sheet>
                    <group>
                        <group>
                            <field name="vehicle_id" readonly="True"/>
                            <field name="route_driver_id" readonly="True"/>
                            <field name="assistant_ids" widget="many2many_tags" readonly="True"/>
                        </group>
                        <group>
                            <field name="code_route" string="Código de Ruta" readonly="True"/>
                            <field name="departure_datetime" readonly="True"/>
                            <field name="arrival_datetime" readonly="True"/>
                        </group>
                    </group>

                    <notebook>
                        <page string="Órdenes de Factura">
                            <field name="sale_order_ids" readonly="True">
                                <list editable="bottom" readonly="True">
                                    <field name="name" string="Número" readonly="True"/>
                                    <field name="partner_id" string="Cliente" readonly="True"/>
                                    <field name="partner_phone"/>
                                    <field name="partner_address"/>
                                    <field name="date_order"/>
                                    <field name="amount_total"/>
                                </list>
                            </field>
                        </page>
                        <page string="Facturas (si ya existen)">
                            <field name="invoice_ids">
                                <list create="false" delete="false" edit="false">
                                    <field name="name"/>
                                    <field name="partner_id"/>
                                    <field name="invoice_date"/>
                                    <field name="state"/>
                                    <field name="payment_state"/>
                                    <field name="amount_total"/>
                                </list>
                            </field>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>
</odoo>