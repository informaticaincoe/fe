<odoo>
    <data>
        <record id="view_hr_planilla_list_custom" model="ir.ui.view">
            <field name="name">hr.payslip.list.custom</field>
            <field name="model">hr.payslip</field>
            <field name="priority" eval="20"/>
            <field name="arch" type="xml">
                <list string="Planilla">
                    <field name="name" string="Empleado"/>
                    <field name="complete_name" string="Departamento"/>
                    <field name="total_worked_days" string="Dias laborados"/>
                    <field name="total_worked_hours" string="Horas laborados"/>
                    <field name="salario_pagar" string="Salario a pagar"/>
                    <field name="comisiones" string="Comisiones"/>
                    <field name="total_overtime" string="horas extras"/>
                    <field name="viaticos"/>
                    <field name="total_viaticos_a_pagar"/>
                    <field name="total_devengado"/>
                    <field name="isss"/>
                    <field name="isr"/>
                    <field name="afp" string="AFP Crecer"/>
                    <field name="afp_confia" string="AFP Confia"/>
                    <field name="afp_IPSFA" string="IPSFA"/>
                    <field name="otros"/>
                    <field name="bancos"/>
                    <field name="venta_empleados"/>
                    <field name="prestamos_incoe"/>
                    <field name="fsv"/>
                    <field name="total_descuentos"/>
                    <field name="sueldo_liquido"/>
                </list>
            </field>
        </record>

        <record id="hr_payslip_search_view_inherit_group_by_lote" model="ir.ui.view">
            <field name="name">hr.payslip.search.inherit.group.by.lote</field>
            <field name="model">hr.payslip</field>
            <field name="inherit_id" ref="hr_payroll.view_hr_payslip_filter"/>
            <field name="arch" type="xml">
                <xpath expr="//search" position="inside">
                    <group expand="0" string="Group By">
                        <filter name="group_by_payslip_run" string="Lote de Nómina"
                                context="{'group_by': 'payslip_run_id'}"/>
                    </group>
                </xpath>
            </field>
        </record>

        <record id="rrhh_base.action_reporte_hr_plantilla" model="ir.actions.act_window">
            <field name="name">Nóminas de Empleados</field>
            <field name="res_model">hr.payslip</field>
            <field name="view_mode">list,form</field>
            <field name="domain">[('struct_id.code', '!=', 'PLAN_VAC')]</field>
            <field name="context">{'search_default_group_by_payslip_run': 1}</field>
        </record>

        <!-- PLANILLA DE VACACIONES -->
        <record id="view_hr_planilla_vacaciones_list_custom" model="ir.ui.view">
            <field name="name">hr.payslip.list.custom</field>
            <field name="model">hr.payslip</field>
            <field name="priority" eval="20"/>
            <field name="arch" type="xml">
                <list string="Planilla vacaciones">
                    <field name="name" string="Empleado"/>
                    <field name="complete_name" string="Departamento"/>
                    <field name="total_worked_days" string="Dias laborados"/>
                    <field name="total_worked_hours" string="Horas laborados"/>
                    <field name="salario_pagar" string="Salario a pagar"/>
                    <field name="vacaciones" string="Vacaciones"/>
                    <field name="viaticos" string="Viaticos ordinarios"/>
                    <field name="total_overtime" string="Horas extras"/>
                    <field name="total_viaticos_a_pagar" string="Total viaticos"/>
                    <field name="total_devengado" string="Total devengado"/>
                    <field name="isss" string="ISSS"/>
                    <field name="isr" string="ISR"/>
                    <field name="afp" string="AFP Crecer"/>
                    <field name="afp_confia" string="AFP Confia"/>
                    <field name="afp_IPSFA" string="IPSFA"/>
                    <field name="otros" string="Otros"/>
                    <field name="bancos" string="Bancos"/>
                    <field name="venta_empleados" string="Venta a empelados"/>
                    <field name="prestamos_incoe" string="Prestamo INCOE"/>
                    <field name="fsv" string="Fondo social vivienda"/>
                    <field name="total_descuentos" string="total descuentos"/>
                    <field name="sueldo_liquido" string="Liquido a recibir"/>
                </list>
            </field>
        </record>

        <record id="rrhh_base.action_reporte_hr_plantilla_vacaciones" model="ir.actions.act_window">
            <field name="name">Nóminas de vacaciones de Empleados</field>
            <field name="res_model">hr.payslip</field>
            <field name="view_mode">list,form</field>
            <field name="domain">[('struct_id.code', '!=', 'INCOE')]</field>
            <field name="context">{'search_default_group_by_payslip_run': 1}</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    Crea una nueva nómina de empleado
                </p>
                <p>
                    Usa esta funcionalidad para generar las nóminas de tus empleados.
                </p>
            </field>
        </record>

        <record id="hr_payslip_search_incoe_custom" model="ir.ui.view">
            <field name="name">hr.payslip.search.incoe.custom</field>
            <field name="model">hr.payslip</field>
            <field name="arch" type="xml">
                <search string="Búsqueda INCOE">
                    <!-- Agrupar por Lote -->
                    <group expand="0" string="Agrupar por">
                        <filter name="group_by_payslip_run" string="Lote de Nómina"
                                context="{'group_by': 'payslip_run_id'}"/>
                    </group>

                    <!-- Tu panel: Año / Mes / Quincena -->
                    <searchpanel>
                        <field name="period_year" string="AÑO" select="one" enable_counters="1"/>
                        <field name="period_month" string="MES" select="one" enable_counters="1"/>
                        <field name="period_quincena" string="QUINCENA" select="one" enable_counters="1"/>
                    </searchpanel>

                    <!-- (Opcional) Filtros rápidos -->
                    <filter name="mes_actual"
                            string="Mes actual"
                            domain="[('period_year','=', time.strftime('%%Y')), ('period_month','=', time.strftime('%%m'))]"/>
                    <filter name="q1_mes_actual"
                            string="1ª quincena (mes actual)"
                            domain="[('period_year','=', time.strftime('%%Y')),
                               ('period_month','=', time.strftime('%%m')),
                               ('period_quincena','=','1')]"/>
                    <filter name="q2_mes_actual"
                            string="2ª quincena (mes actual)"
                            domain="[('period_year','=', time.strftime('%%Y')),
                               ('period_month','=', time.strftime('%%m')),
                               ('period_quincena','=','2')]"/>
                </search>
            </field>
        </record>

        <record id="action_reporte_hr_plantilla_incoe" model="ir.actions.act_window">
            <field name="name">Nóminas INCOE</field>
            <field name="res_model">hr.payslip</field>
            <field name="view_mode">list,form</field>
            <field name="domain">[('struct_id.code', '=', 'INCOE')]</field>
            <field name="search_view_id" ref="hr_payslip_search_incoe_custom"/>
            <field name="view_ids" eval="[(5, 0, 0),
                    (0, 0, {'view_mode': 'list', 'view_id': ref('view_hr_planilla_list_custom')}),
                    (0, 0, {'view_mode': 'form', 'view_id': ref('hr_payroll.view_hr_payslip_form')})]"/>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    Reporte de Nóminas INCOE
                </p>
            </field>
        </record>
    </data>


</odoo>